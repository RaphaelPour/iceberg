<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" type="image/png" href="icons8-iceberg-48.png">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">

	<link href="signin.css" rel="stylesheet">
    <title>Iceberg | Login</title>
  </head>
  <body>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
	<script src="dist/alasql.min.js"></script> 
<script>
    
	// Prepare Database
	alasql("CREATE TABLE User (name string, password string, email string)");
	alasql("INSERT INTO User VALUES ('errorHe4d','ThisIsNotAPassword', 'error@he4d.com'), ('john','smith', 'john.smith@abc.de'), ('Adam','Banvemb', 'a@da.m')");
	


  function validateUser(username, password)
  {
      var query = "SELECT * FROM User WHERE name='" + username + "' AND password='" + password + "';";
      console.log("validateUser(): " + query);

      var result = alasql(query);


      if(result == 0)
      {
          $("#loginMessage").text("Access denied!");
          $("#loginMessage").removeClass("alert-success");
          $("#loginMessage").addClass("alert-danger");
          $("#loginMessage").show();
          
      }
      else
      {
          $("#loginMessage").text("Access granted!");
          $("#loginMessage").removeClass("alert-danger");
          $("#loginMessage").addClass("alert-success");
          $("#loginMessage").show();

          console.log(result);
      }
  }
  
           
</script>
<body class="text-center">
  
    <form class="form-signin" id="loginForm" action="#">
      <img class="mb-4" src="icons8-iceberg-96.png" alt="" width="96" height="96">
      <h1 class="h3 mb-3 font-weight-normal">Iceberg Login</h1>
      <h4 class="h5 mb-5 font-weight-normal"><em>~Try 2 SQLInject me~</em></h4>
      <label for="inputUser" class="sr-only">User</label>
      <input type="text" id="inputUser" name="user" class="form-control" placeholder="Username" required autofocus>
      <label for="inputPassword" class="sr-only">Password</label>
      <input type="password" id="inputPassword" name="password" class="form-control" placeholder="Password" required>

      <div id="loginMessage" class="alert" style="display:none">
      </div>

      <div class="checkbox mb-3">
        <label>
          <input type="checkbox" value="remember-me"> Remember me
        </label>
      </div>
      <button class="btn btn-lg btn-primary btn-block" type="submit" onclick="validateUser($('#inputUser').val(), $('#inputPassword').val())">Sign in</button>
      <p class="mt-5 mb-3 text-muted">&copy; 2018, Icon by <a href='https://icons8.com'>Icons8</a></p>
    </form>

    <script>
      // Avoid page refresh on submit
      $("#loginForm").submit(function(e) {
        e.preventDefault();
      });
    </script>
  </body>
</html>